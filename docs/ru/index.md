# MTChat

**Встраиваемый чат-сервис для B2B/B2C платформ.**

MTChat -- микросервисная чат-система, предназначенная для встраивания в бизнес-приложения. Привязывает разговоры к объектам вашей предметной области (заказы, тендеры, рейсы и т.д.) и управляет доступом участников через гибкую систему scope-правил.

## Основные возможности

- **Чаты привязаны к объектам** -- диалоги связаны с бизнес-объектами вашей системы
- **Несколько чатов на объект** -- создавайте сколько угодно диалогов для одной сущности
- **Scope-контроль доступа** -- определяйте, кто видит и может присоединиться к чату по tenant + отдел + роль
- **Прямые + потенциальные участники** -- явно добавленные получают уведомления; подходящие по scope могут найти и присоединиться
- **Форматирование сообщений** -- жирный, курсив, списки, ссылки, файлы, ответы, редактирование, удаление
- **Реальное время** -- мгновенные сообщения через WebSocket с отслеживанием онлайн-статуса
- **Vue SDK** -- готовый Vue 3 компонент с полным и inline режимами отображения
- **Темы** -- светлая/тёмная тема с настройкой через CSS-переменные
- **Интернационализация** -- русский, английский, китайский из коробки

## Архитектура

```
┌──────────────────────────────────────────────────────────┐
│                  Хост-приложение                           │
│  ┌────────────┐              ┌──────────────────────┐    │
│  │  Фронтенд  │              │  Бэкенд              │    │
│  │ ┌────────┐  │              │  - Создание чатов    │    │
│  │ │ MTChat │  │              │  - Управление        │    │
│  │ │Vue SDK │  │              │    участниками       │    │
│  │ └───┬────┘  │              └──────────┬───────────┘    │
└───────┼────────┘                         │                │
        │                                  │
        │ Chat API                         │ Management API
        │                                  │ (Admin Token)
        ▼                                  ▼
┌──────────────────────────────────────────────────────────┐
│                    MTChat Backend                          │
│  ┌──────────────┐  ┌────────────────┐  ┌────────────┐   │
│  │   Chat API   │  │ Management API │  │  Вебхуки   │   │
│  └──────────────┘  └────────────────┘  └────────────┘   │
│                                                           │
│            PostgreSQL + Redis + S3 (MinIO)                │
└──────────────────────────────────────────────────────────┘
```

## Быстрые ссылки

<div class="grid cards" markdown>

-   :material-rocket-launch: **Начало работы**

    ---

    Установка и запуск MTChat за 5 минут.

    [:octicons-arrow-right-24: Установка](getting-started/installation.md)
    [:octicons-arrow-right-24: Быстрый старт](getting-started/quickstart.md)

-   :material-book-open-variant: **Руководство**

    ---

    Архитектура, модель данных и контроль доступа.

    [:octicons-arrow-right-24: Архитектура](guide/architecture.md)
    [:octicons-arrow-right-24: Модель данных](guide/data-model.md)
    [:octicons-arrow-right-24: Scope-правила](guide/scope-matching.md)

-   :material-api: **API**

    ---

    Management API, Chat API, WebSocket, вебхуки, загрузка файлов.

    [:octicons-arrow-right-24: Management API](api/management.md)
    [:octicons-arrow-right-24: Chat API](api/chat.md)
    [:octicons-arrow-right-24: WebSocket](api/websocket.md)

-   :material-vuejs: **Vue SDK**

    ---

    Готовый Vue 3 компонент с полным и inline режимами.

    [:octicons-arrow-right-24: Компоненты](sdk/components.md)
    [:octicons-arrow-right-24: Конфигурация](sdk/configuration.md)
    [:octicons-arrow-right-24: Темы](sdk/theming.md)

</div>

## Технологии

| Компонент | Технология |
|-----------|------------|
| Бэкенд | Rust (axum, sqlx, tokio) |
| SDK | TypeScript + Vue.js 3 |
| База данных | PostgreSQL 17 |
| Кэш / PubSub | Redis 7 |
| Хранилище файлов | S3-совместимое (MinIO) |
| Очередь задач | apalis (Redis backend) |

## Лицензия

MTChat -- открытое ПО, распространяемое по [лицензии MIT](https://github.com/nicenemo/mtchat/blob/master/LICENSE).
